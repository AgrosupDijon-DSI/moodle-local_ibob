{"version":3,"file":"userbadgedisplayer.min.js","sources":["../src/userbadgedisplayer.js"],"sourcesContent":["\nimport $ from 'jquery';\nimport Modal from 'core/modal';\nimport ModalEvents from 'core/modal_events';\nimport templates from 'core/templates';\nimport {call as fetchMany} from 'core/ajax';\nimport {get_string as getString} from 'core/str';\n\nexport const init = () => {\n    getDetailBadge();\n};\nexport const getDetailBadge = () => {\n    $(\".ibob-badge\").on(\"click\", async function() {\n        let elem = $(this);\n        let badgeid = elem.data(\"id\");\n\n            const response = await detailBadgeModal(badgeid);\n            const data = JSON.parse(response);\n\n            displayBadgeDetails(data);\n    });\n};\n\nconst detailBadgeModal = (badgeid) => fetchMany([{\n    methodname: 'local_ibob_detail_badge_function',\n    args: {\n        badgeid,\n    },\n}])[0];\n\nconst displayBadgeDetails = (data) => {\n    let modalTitle = getString('modalBadgeDetail', 'local_ibob');\n    let trigger = $('#badge_' + data.id);\n\n    return Modal.create({\n        title: modalTitle,\n        body: templates.render('local_ibob/userbadgedisplayer', data),\n    }, trigger).then(function(modal) {\n        if (modal.countOtherVisibleModals() == 0) {\n            modal.getRoot().on(ModalEvents.hidden, function() {\n                modal.destroy();\n            });\n        }\n        modal.show();\n        modal.getRoot().removeClass('hide').addClass('show');\n        return true;\n    });\n};\n"],"names":["getDetailBadge","on","async","badgeid","this","data","response","detailBadgeModal","JSON","parse","displayBadgeDetails","methodname","args","modalTitle","trigger","id","Modal","create","title","body","templates","render","then","modal","countOtherVisibleModals","getRoot","ModalEvents","hidden","destroy","show","removeClass","addClass"],"mappings":"ikBAQoB,KAChBA,wBAESA,eAAiB,yBACxB,eAAeC,GAAG,SAASC,qBAErBC,SADO,mBAAEC,MACMC,KAAK,YAEdC,eAAiBC,iBAAiBJ,SAClCE,KAAOG,KAAKC,MAAMH,UAExBI,oBAAoBL,uDAI1BE,iBAAoBJ,UAAY,cAAU,CAAC,CAC7CQ,WAAY,mCACZC,KAAM,CACFT,QAAAA,YAEJ,GAEEO,oBAAuBL,WACrBQ,YAAa,mBAAU,mBAAoB,cAC3CC,SAAU,mBAAE,UAAYT,KAAKU,WAE1BC,eAAMC,OAAO,CAChBC,MAAOL,WACPM,KAAMC,mBAAUC,OAAO,gCAAiChB,OACzDS,SAASQ,MAAK,SAASC,cACiB,GAAnCA,MAAMC,2BACND,MAAME,UAAUxB,GAAGyB,sBAAYC,QAAQ,WACnCJ,MAAMK,aAGdL,MAAMM,OACNN,MAAME,UAAUK,YAAY,QAAQC,SAAS,SACtC"}